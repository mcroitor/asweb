# Лабораторная работа № 5: Элементы безопасности Web сервера

Одной из обязанностей администратора сервера являнтся аудит безопасности, выполняемый периодично. Целью данной работы является знакомство с данным процессом.

## Подготовка

Запустите виртуальный сервер (LL Nr. 4) и подключитесь к виртуальному серверу по SSH (putty или ssh).

## Выполнение

Проверьте безопасность сервера по следующему контрольному списку. Вычеркнутые шаги пропускаются.

1. ~~__Физическая безопасность__~~
2. ~~__Шифрование файловой системы__ – проверьте, если используется шифрование файловой системы.~~
3. __Обновление операционной системы__ – обновите, если необходимо, установленные приложения и операционную систему.
4. __Корректная настройка сетевого доступа__ – проверьте, установлен ли файервол. Если нет, то установите его и включите. Разрешите доступ только для портов `22`, `80`, `443`. В качестве файервола рекомендуется ufw.
  1. проверить открытые порты можно командой `sudo netstat -plunt`
  2. открыть доступ порту 80 можно командой `sudo ufw allow 80`
5. __Шифрование передаваемых данных__ – проверьте, используется ли HTTPS. Если нет, то включите его поддержку у Apache HTTP Server и php.
  1. за поддержку SSL у Apache HTTP Server отвечает модуль `mod_ssl`
  2. за поддержку SSL у PHP отвечает модуль `php_openssl`
6. ~~__Сложные пароли__~~
7. Ограничение доступа пользователей – проверьте ОС на наличие неизвестных / ненужных пользователей. Если такие пользователи существуют, заблокируйте им доступ.
8. ~~__Изоляция ролей и сервисов__~~
9. __Резервное копирование__ – проверьте, если существует регулярное копирование сайтов и их баз данных на сервере. Если нет, то создайте соответствующие правила cron.
10. __Политика настроек безопасности баз данных__ – проверьте, чтобы у каждой базы данных был свой пользователь
11. __Политика настроек безопасности Web сервера__ – скройте версию используемого программного обеспечения. Отключите опасные функции php.
12. __Журналирование и мониторинг__ – Для защиты от попыток подбора паролей установите приложение `fail2ban`.

## Ответьте на вопросы:

1. Какие функции PHP являются потенциально опасными (уязвимыми для взлома)?
2. Существуют ли случаи, когда для папки необходимо установить доступ 0777?
3. Для мониторинга ошибок системы существуют различные приложения. Приведите пример такого приложения.
4. Как думаете, по каким причинам пропускаются некоторые элементы из контрольного списка?
